<script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
<script>
  const socket = io("https://zerodha-saas.onrender.com");

  const token = localStorage.getItem("ZERODHA_ACCESS_TOKEN");
  const key = sessionStorage.getItem("ZERODHA_API_KEY");

  socket.emit("start-stream", { api_key: key, access_token: token });

  socket.on("tick", (ticks) => {
    ticks.forEach(tick => {
      if (tick.instrument_token === 256265) {
        document.getElementById("nifty").textContent = tick.last_price;
      } else if (tick.instrument_token === 260105) {
        document.getElementById("banknifty").textContent = tick.last_price;
      }
    });
  });
</script>
